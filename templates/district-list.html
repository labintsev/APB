{% extends "base.html" %}

{% block title %}Главная{% endblock %}

{% block content %}

<div class="container">
  <div class="page-title">
    <h1>Districts</h1>
  </div>

  <div class="card">
    <h3>Create District</h3>
    <form method="post" action="{{ url_for('create_district') }}">
      <div style="display:flex;gap:8px;align-items:center">
        <input name="name" placeholder="District name" required />
        <select name="region_id" required>
          <option value="">Select region</option>
          {% for r in regions %}
          <option value="{{ r.id }}">{{ r.name }}</option>
          {% endfor %}
        </select>
        <input name="population" placeholder="Population (raw)" />
        <button class="btn btn-primary" type="submit">Create</button>
      </div>
    </form>

    <h3 style="margin-top:12px">Existing Districts</h3>
    {% if districts %}
    <div class="table-wrap">
      <table class="app-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Region</th>
            <th style="text-align:right">Population (raw)</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for d in districts %}
          <tr>
            <td><a href="{{ url_for('district_detail', id=d.id) }}">{{ d.name }}</a></td>
            <td>{{ d.region_name }}</td>
            <td class="numeric">{{ d.population }}</td>
            <td>
              <a class="btn" href="{{ url_for('edit_district', district_id=d.id) }}">Edit</a>
              <form method="post" action="{{ url_for('delete_district', district_id=d.id) }}" style="display:inline">
                <button class="btn btn-outline" type="submit">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="small">No districts found.</p>
    {% endif %}
  </div>

  {% endblock %}